# Static Site Template

A static website template project using 11ty and Parcel so I can reuse it for my projects.

## Running

```
npm run build
npm run build-parcel
npm run serve
npm run serve-parcel
npm run clean
npm run fmt
```

## Design Choices:

```
_data/
_includes/  # Layouts, partials, macros and _scss files
static/     # Things that don't get templated. They get copied to /
src/        # Things that get templated
            #  Contents of the website, as well as  Scss and Ts. 
```

### linking directly to scss and ts in your HTML

I have created two 11ty Transforms that change the extension of URLs containing `scss` and `ts` to
point to their CSS and js counterparts.

### local styles and scripts

Local Scss and Ts files are supported. The engine won't do any templating on
them, apart from compiling them to js and css automatically. To include them, I added
2 page variables: 
```
localstyles: "./styles.scss"
localscript: "./my-script.ts"
```

With this system we can have per-page scripts and styles on demand, just in case
we need to add some custom functionality to a page.

### index.html in urls

Bundling with Parcel requires that `href`s to other pages end with `index.html`. For that, I have
created an 11ty Transform that inserts `index.html` at the end of the URLs that don't have it.

Once parcel bundles the page, those annoying `index.html` get removed via `parcel-optimizer-friendly-urls`.

### Parcel

For the final build, we run Parcel over the website generated by 11ty. Even though the website works
by itself (so it is not necessary to run parcel while developing), it can still
be useful to run it before publishing to production, to minify the code and
optimize it.

For this, we need to tell Parcel to treat `_site_eleventy` as the root. Because
parcel does not allow us to do this through configuration, we need to trick it into thinking that
that is the root directory. For that reason, from package.json, we create a `_site_eleventy/.hg` file
before building.

### Markdown-it and it's plugins

markdown-it allows us to use markdown plugins aswell. For example, this allows us to add inline styles `markdown-it-attrs`.

```md
hero # Headline {.text-5xl} 
```

### Shortcodes and Macros

Both shortcodes and macros are supported. They are located under `_includes`.

# Static Site Template

A static website template using 11ty and Parcel so I can reuse it for my projects.

## Running

```
npm run build:eleventy  # Build the website
npm run build:parcel    # Build a production build
npm run serve:eleventy  # Serve and watch 11ty 
npm run serve:parcel    # Serve a production build 
npm run clean           # Clean everything
npm run fmt             # Format the ts, js, scss, css, md, html...
```

> For production builds (parcel) it will be required to export the variable `PUBLIC_URL` with the URL of the website.

## Design Choices:

```
_11ty       # Configuration and plugins for 11ty
_data/      # Metadata
_includes/  # Layouts, partials, shortcodes, macros and _scss files
static/     # Stuff that does not get templated. They get (passthrough) copied to _site_eleventy/.
src/        # Stuff that get templated
            # Contents of the website, as well as styles and scripts
```

### Linking directly to Scss and Ts in your HTML

I have created two 11ty *Transforms* that change the extension of URLs containing `scss` and `ts` to point to their CSS and js counterparts.

### Local styles and scripts

Local styles and script files (as in, "per page", or "local to one specific page") are supported. The engine won't do any templating on them, apart from compiling them to Js and Css in case they are not already. To include them, I added 2 page variables: 
```
localstyles: "./styles.scss"
localscript: "./my-script.ts"
```

### Index.html in urls

Bundling with Parcel requires that `href`s to other pages end with `index.html`. For that, I have created an 11ty Transform that inserts `index.html` at the end of the URLs that don't have it.

Once parcel bundles the page, those annoying `index.html` get removed via `parcel-optimizer-friendly-urls`.

### Parcel

For the final build, we run Parcel over the website generated by 11ty. Even though the website works by itself (so it is not necessary to run parcel while developing), it can still be useful to run it before publishing to production, to minify the code and
optimize it.

For this, we need to tell Parcel to treat `_site_eleventy` as the root. Because
parcel does not allow us to do this through configuration, I need to trick it into thinking that that is the root directory. For that reason, I create a `_site_eleventy/.hg` file before building.

### Markdown-it 

Eleventy allows us to change the markdown engine. I decided to use markdown-it since allows me to use markdown-it plugins. An example of this is the markdown-it-attrs plugin, which allows me to add classes to markdown elements.

```md
hero # Headline {.text-5xl} 
```
